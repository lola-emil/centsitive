<app-navbar pageTitle="Overview" (onIconClicked)="showSideNav()"></app-navbar>
<app-sidenav [visible]="sidenavVisible" (onClickOverlay)="hideSideNav()"></app-sidenav>

<br>
<div class="container mt-16">
    <div class="flex gap-2 border p-3 rounded border-neutral-700 items-center">
        <div>
            <svg width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M10 2.5a7.5 7.5 0 0 1 5.964 12.048l4.743 4.745a1 1 0 0 1-1.32 1.497l-.094-.083-4.745-4.743A7.5 7.5 0 1 1 10 2.5Zm0 2a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11Z"
                    class="fill-neutral-500" />
            </svg>
        </div>
        <input type="text" (input)="searchRecord($event)" placeholder="Search" class="w-full bg-transparent outline-none">
    </div>
    <br>
    <div>
        <div class="transaction-card" *ngFor="let record of records">
            <div class="flex-1">
                <p class="text-sm">{{record.category}}</p>
                <p class="text-sm text-neutral-500 w-44 overflow-hidden text-ellipsis">{{record.note}}</p>
            </div>

            <div class="flex items-center gap-4">
                <div class="text-rose-400">
                    Php {{formatNumber(record.amount)}}
                </div>
    
                <div (click)="showAlert(record.record_id!)">
                    <svg width="20" height="20" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M21.5 6a1 1 0 0 1-.883.993L20.5 7h-.845l-1.231 12.52A2.75 2.75 0 0 1 15.687 22H8.313a2.75 2.75 0 0 1-2.737-2.48L4.345 7H3.5a1 1 0 0 1 0-2h5a3.5 3.5 0 1 1 7 0h5a1 1 0 0 1 1 1Zm-7.25 3.25a.75.75 0 0 0-.743.648L13.5 10v7l.007.102a.75.75 0 0 0 1.486 0L15 17v-7l-.007-.102a.75.75 0 0 0-.743-.648Zm-4.5 0a.75.75 0 0 0-.743.648L9 10v7l.007.102a.75.75 0 0 0 1.486 0L10.5 17v-7l-.007-.102a.75.75 0 0 0-.743-.648ZM12 3.5A1.5 1.5 0 0 0 10.5 5h3A1.5 1.5 0 0 0 12 3.5Z"
                            fill="#fff" />
                    </svg>
                </div>
            </div>
        </div>
    </div>
</div>

<br>
<br>
<br>

<a routerLink="/addrecord" class="floating-action-button">
    <svg width="20" height="20" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path
            d="M11.883 3.007 12 3a1 1 0 0 1 .993.883L13 4v7h7a1 1 0 0 1 .993.883L21 12a1 1 0 0 1-.883.993L20 13h-7v7a1 1 0 0 1-.883.993L12 21a1 1 0 0 1-.993-.883L11 20v-7H4a1 1 0 0 1-.993-.883L3 12a1 1 0 0 1 .883-.993L4 11h7V4a1 1 0 0 1 .883-.993L12 3l-.117.007Z"
            fill="#fff" />
    </svg>
</a>

<app-alert-dialog 
message="Are you sure you want to delete this transaction?"
(onCancel)="cancelAlert()"
(onConfirm)="deleteRecord()"
[visible]="dialogVisible"
></app-alert-dialog>